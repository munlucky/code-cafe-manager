workflow:
  name: moon
  description: Moon workflow with stage-specific provider configuration
  stages:
    - plan
    - code
    - test
    - check
  loop:
    max_iters: 5
    fallback_next_stage: plan
    stop_when: "$.done"

# Stage-specific provider/role/profile configuration
# Each stage can now specify which provider to use
plan:
  provider: claude-code
  role: planner
  profile: simple

code:
  provider: claude-code
  role: coder
  profile: simple

test:
  provider: claude-code
  role: tester
  profile: simple

check:
  provider: claude-code
  role: checker
  profile: simple
